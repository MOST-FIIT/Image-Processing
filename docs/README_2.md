## Сборка проекта с помощью утилиты CMake

В данном разделе описана типичная последовательность действий, которую необходимо выполнить для сборки проекта с использованием утилиты CMake.

  1. Рядом с директорией `Image-Processing` создайте
     `Image-Processing-Build`. В новой директории будут размещены файлы
     решения и проектов, сгенерированные с помощью CMake.

     ```bash
     $ mkdir Image-Processing-Build
     ```

  1. Перейдите в директорию `Image-Processing-Build`:

     ```bash
     $ cd ./Image-Processing-Build
     ```

  1. Сгенерируйте файлы решения и проектов с помощью утилиты CMake. Для этого
     можно воспользоваться графическим приложением, входящим в состав
     утилиты, либо выполнить следующую команду:

  ```bash
  $ cmake -DOpenCV_DIR="<path-to-OpenCVConfig.cmake>" -G <generator-name> <path-to-Image-Processing>
  # <OpenCVConfig.cmake-path> - директория, в которой установлена
  #     библиотека OpenCV и расположен файл OpenCVConfig.cmake
  #     (обычно C:/opencv/build/)
  # <generator-name> - название генератора, например, "Visual Studio 14 2015 Win64"
  #     (если в командной строке набрать cmake без параметров, то можно просмотреть
  #     список доступных генераторов)
  # <path-to-Image-Processing> - путь до директории
  #     Image-Processing, где лежат исходные коды проекта (если предыдущие действия
  #     выполнены корректно, то это директория`../Image-Processing`)
  ```
  Обратите внимание, что для сборки проекта необходима версия OpenCV 3.1.x,
  например, 3.1.0, которую можно скачать [здесь](http://opencv.org/downloads.html).
  В терминал-классах OpenCV 3.1.0 установлена в директорию `C:\OpenCV31`

  1. Откройте сгенерированный файл решения `image_processing.sln`. 
  
  1. Нажмите правой кнопкой мыши по проекту `ALL_BUILD` и выберите пункт
     `Rebuild` контекстного меню, чтобы собрать решение. В результате все
     бинарные файлы будут размещены в директории
     `Image-Processing-Build/bin`.
     
  1. Для запуска приложения и тестов откройте командную строку в директории с бинарными файлами.
  
  1. Можно запустить приложение `highui_demo.exe`, где уже есть реализованные методы одной из команд для примера. 
     Первым аргументом командной строки передайте картинку, вторым `--binsim` (бинаризация методом симметричного пика) 
     или `--canny` (выделение границ методом Кэнни). Возможное сообщение
     при запуске: `The program can't start because opencv_world310.dll is missing from your computer. Try reinstalling
     the program to fix this problem.`. 
     Решение 1: скопировать соответствующую библиотеку из `C:\opencv\build\x64\vc14\bin`
     к бинарным файлам проекта. Решение 2: добавить путь `C:\opencv\build\x64\vc14\bin`
     в переменную окружения `PATH`. Так же для обработки некоторых форматов картинок и видео может понадобиться 
     динамическая библиотека `opencv_ffmpeg310_64.dll` или `opencv_ffmpeg310.dll`. Так же скопируйте их к бинарным файлам проекта.
